---
title: 总线
---

# 总线

特点：分时共享

总线一次可以传输一个定长的字节块，称为字。64位系统即总线一次可以传输 64 位（8字节），这里一个字就是 8 字节



## 结构

1. 单总线：结构简单成本低；带宽低负载高，不支持并发传送，`io`与`m`共用一组`ad`线,所以可以**统一编址**

2. 双总线：将低速IO设备从单总线上分离出来，实现了存储器总线和IO总线的分离，需要增加通道等硬件设备，主存总线用于CPU、主存、通道之间的数据传输。`io`总线和`m`总线,`io`写入`m`需要经过`cpu`

3. 三总线：主存总线，IO总线，DMA总线。DMA用于内存与高速外设之间直接传送数据；提高了IO性能，提高了系统吞吐量；系统工作效率较低。`io`接口有`DMA`总线直接连接`m`,任意时刻只能使用一种总线,`m bus`和`dma bus`不能同时对`m`进行存取,`io bus`只有在`cpu`执行`io code`时使用

局部总线技术的作用是节省系统的总带宽。（局部总线VESA/PCI/AGP）

## 分类

1. 片内总线：CPU芯片内部的总线

2. 系统总线：连接5大部件之间的信息传输线。`ISA`,`EISA`,`VESA`,`PCI`,`PCI-e`不能分开单独连接设备

3. 

    4. `data`：双向传输

    5. `adre`：单向传输

    6. `ctrl`：（读写etc）微观单向，整体双向

7. IO总线：`USB`、`SATA`串行、`PCI`（固态）并行、`IDE`（硬盘光驱通过`IDE`接口与主板连接）等（局部总线`VESA`/`PCI`/`AGP`）

8. 通信总线：计算机系统之间的通信

## 事务

处理器或IO如何使用总线？

1. 请求：CPU或DMA申请总线控制权

2. 仲裁：总线仲裁机构授予使用权

3. 寻址：主设备通过总线给出要访问的从设备地址和有关命令

4. 传输：一般只允许传输一个字长的数据

5. 释放：主模块信息撤离，让出总线控制权

突发（猝发）传送方式：能够进行连续成组数据的传送，其寻址阶段发送的是连续的数据单元的首地址，在传输阶段传送多个连续单元的数据，每个时钟周期可以传送一个字长信息，但是不释放总线，直到一组数据全部传送完毕后再释放总线。

## 周期

1. 申请：申请模块（CPU或DMA）提出总线申请，经总线仲裁机器决定下一个传输周期的总线使用权

2. 寻址：主模块发出地址和命令,启动从模块

3. 传送：主模块和从模块数据交换

4. 结束：主模块信息从系统总线撤出,让出总线使用权

## 定时

通信控制，总线定时是指总线在双方交换数据的过程中需要时间上配合关系的控制，这种控制称为总线定时。

1. 同步定时方式：**总线传输周期包括4个时钟周期，地址信号全程陪伴。**优点：速度快，控制逻辑简单缺点：主从设备强制性同步，不能及时进行数据通信的有效性检查，可靠性差适用：总线长度较短、总线所接部件的存取时间比较接近的系统

2. 异步定时方式：总线周期长度可变、保证两个工作速度相差很大的部件或设备之间可靠地进行信息交换，自动适应时间配合。缺点：控制方式复杂，速度比同步慢

3. 

    4. 不互锁方式：请求信号和回答信号自动撤消

    5. 半互锁方式：请求接到回答信号才撤消，回答信号自动撤消

    6. 全互锁方式：请求接到回答信号撤消，回答知道请求撤消后再撤消



