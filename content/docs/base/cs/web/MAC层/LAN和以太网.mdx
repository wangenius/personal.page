---
title: LAN和以太网
---

# LAN和以太网

`IEEE 802.3` `data link layer`

## Ethernet

802.3同轴电缆双绞线曼码不连接不编号不确认不可靠

MAC地址：`6B = 48b`。固化在适配器ROM中的地址，硬件地址，物理地址，MAC地址，局域网地址。全球唯一，适配器独占。局域网地址并不指名主机位置，所以严格上讲，之能叫每个站的名字。应为是二进制比特码，所以习惯上称为地址。一般由连续的分隔的12个十六进制数表示。前6位`IEEE`的注册管理机构`RA`分配，生产局域网适配器的厂家向其购买，称为组织唯一标识符。后6位厂家指派，称为扩展标识符。如果某个主机或路由器安装多个适配器，那这样的主机或路由器就有多个地址，所以MAC地址实际上是某个接口的标识符。

逻辑拓扑结构总线型，物理拓扑结构是星型和拓展星型

使用`CSMA/CD`。无法使用`MAC.addr`来进行跨网络访问。以太网没有`IP`。

1. 前导码：前同步码`7B` + `delimiter(1B)`

2. `Addr(12B)`：`dest(6B)` + `source(6B)`

3. `type(2B)`：`0x0800`：`IPv4`，`0x0806`：`ARP`，`0x86DD`：`IPv6`。

4. `message(1500B)`

5. `FCS(4B)`：校验范围-目的地址到数据段末尾，算法采用32位CRC

以太网`MAC.frame`不需要`end.delimiter`，因为以太网传送帧时各帧之间必须有一定的间隙。但仍要加尾部`FCS`，提供无差错传输。

### 扩展以太网

在网络层看来，扩展的以太网仍然是一个网络。

1. 物理层扩展：转发器或者hub

2. 数链层扩展：网桥，交换机（多端口网桥，交换式集线器，以太网交换机）淘汰了物理层集线器的使用

3. `VLAN`：局域网给用户提供的一种服务，`MAC`帧在类型前增加4B的标签标识符，指名发送该帧的计算机属于哪一个虚拟局域网，一个虚拟局域网的范围可以跨越不同的交换机，虚拟局域网成为实际广播域。以太网内主机太多，广播风暴问题。内部部门需要加密。

### 高速以太网

1. `10BAST5`：曼码，粗同轴电缆，总线型，最大段长`max distance:500m`

2. `10BAST2`：曼码，细同轴电缆，总线型，最大段长`max distance:185m`

3. `100BASE-T`：曼码，双绞线，最大段长`100m`，`100Mb/s`基带信号的星型拓扑结构的以太网，逻辑上是总线型，星型网中心是集线器，属于一个冲突域。使用`CSMA/CD`协议，支持全双工、半双工。全双工不使用`CSMA/CD`协议，最短帧长不变，将最大电缆长度减小到`100m`，帧间时间间隔从9.6微秒改为0.96微秒。

4. `Gbit`千兆以太网，允许在`1Gb/s`用全双工和半双工方式工作。半双工使用`CSMA/CD`协议。

5. `10Gbit`以太网，各兆以太网帧格式完全相同，光纤传输，全双工方式，不再使用`CSMA/CD`协议。

## WLAN

802.11CSMA/CA

有固定基础设施的无线局域网（预先建立能够覆盖一定范围的固定基站），使用星型拓扑,MAC层使用CSMA/CA，又称WIFI.

**基本服务集**`BSS`：包括一个接入点`AP`和若干移动站。各站在本`BSS`中和外部站的通信都要通过本`BSS`的`AP`。安装`AP`时必须为该`AP`分配一个不超过`32B`的和一个信道。`BBS`直径不超过`100M`，分配系统`DS`将若干个`BSS`连接为一个扩展服务集`ESS`。

`WIFI frame`：

- `head(30B)`：`ctrl(2B)`+`last(2B)`+`4*addr(6B)`（地址含义取决于帧控制字段的去往AP和来自AP字段）

- `message`：最大长度`2312B`（比以太网长很多）

- FCS`4B`



