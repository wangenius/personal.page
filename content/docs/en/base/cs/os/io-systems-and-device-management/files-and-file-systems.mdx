---
title: Files and File Systems
sidebar_position: 3
slug: filesystems
---

A file is simply a sequence of bytes; the OS imposes structure (records, metadata) on top of that abstraction.

## Logical Organization

- **Stream files** – Unstructured byte streams.
- **Sequential files** – Fixed-length records stored sequentially.
- **Indexed files** – Variable-length records referenced via an index table.
- **Hashed files** – Record location determined by a hash of the key.

## Physical Allocation

1. **Contiguous** – Fast sequential access but suffers from external fragmentation and inflexible growth.
2. **Linked** – Each block points to the next; simple but poor random access. FAT stores pointers in a table for faster traversal.
3. **Indexed** – Each file has an index block containing pointers to data blocks (single/double/triple indirection as in UNIX).

## Metadata

File Control Blocks (FCBs) or inodes store ownership, permissions, timestamps, block addresses, etc. Directories are collections of FCBs (or filenames plus inode pointers). Modern file systems (FAT, ext4, NTFS) define on-disk structures, allocation policies, and naming conventions.

## Directory Structures

- Single-level
- Two-level (per-user subdirectories)
- Tree/hierarchical
- DAG (shared subtrees via hard links)

## Space Management

Techniques include bitmaps, free lists, and grouped linking (UNIX superblock). Allocation strategies track free blocks and handle block assignment/reclamation.

## Sharing & Protection

- **Hard links** – Multiple directory entries point to the same inode; reference count controls deletion.
- **Symbolic links** – Special files containing pathnames.
- **Access control** – ACLs, capabilities, passwords, or encryption guard access to files.

## Buffer Cache & Memory-Mapped Files

Caches of recently used blocks reduce disk I/O; `mmap` maps files directly into a process’s address space, eliminating extra copies and enabling shared-memory semantics.
